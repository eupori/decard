# 데카드 MVP 체크리스트 (3일)

> 목표: "PDF 올리고 → 근거 포함 카드 받고 → 검수하고 → 다운로드" 루프 완성

---

## Day 1: 백엔드 (API + AI)

### 프로젝트 세팅
- [ ] FastAPI 프로젝트 구조 생성 (`back/`)
- [ ] 의존성 설치 (fastapi, uvicorn, pdfplumber, anthropic, python-multipart)
- [ ] 환경변수 설정 (`.env` — ANTHROPIC_API_KEY, APP_ENV 등)
- [ ] CORS 설정 (localhost:3000 허용)

### PDF 처리
- [ ] PDF 업로드 엔드포인트 (`POST /api/v1/upload`)
- [ ] pdfplumber로 페이지별 텍스트 추출
- [ ] 페이지 번호 ↔ 텍스트 매핑 구조 저장
- [ ] 파일 크기 제한 (10MB) + 텍스트 PDF 검증
- [ ] 업로드 후 원본 파일 자동 삭제 (저작권 보호)

### 카드 생성 (Claude API)
- [ ] 카드 생성 엔드포인트 (`POST /api/v1/generate`)
- [ ] Claude 프롬프트 설계:
  - 입력: 페이지별 텍스트 + 템플릿 타입
  - 출력: 카드 배열 (앞면/뒷면/근거/태그)
  - 규칙: 근거 불확실하면 카드 미생성
- [ ] 템플릿 3종 지원: 정의형 / 빈칸형(Cloze) / 비교형
- [ ] 응답 파싱 → Pydantic 모델 검증
- [ ] 생성 결과 SQLite 저장 (세션 ID 기반)

### 카드 조회/관리
- [ ] 카드 목록 조회 (`GET /api/v1/sessions/{id}`)
- [ ] 카드 상태 업데이트 (`PATCH /api/v1/cards/{id}`) — 채택/삭제/수정
- [ ] CSV 다운로드 (`GET /api/v1/sessions/{id}/download`) — Anki 임포트 포맷

### 데이터 모델
- [ ] `Session` — id, created_at, filename, page_count, status
- [ ] `Card` — id, session_id, front, back, evidence, page_num, tags, status(accepted/rejected/pending), template_type

---

## Day 2: 프론트엔드 (UI)

### 프로젝트 세팅
- [ ] Next.js 14 프로젝트 생성 (`front/`)
- [ ] Tailwind CSS 설정
- [ ] API 클라이언트 (`lib/api.ts`)
- [ ] 다크 모드 기본 설정

### 랜딩 페이지 (`/`)
- [ ] 히어로: 한 줄 카피 + PDF 업로드 영역
- [ ] 드래그앤드롭 PDF 업로드 UI
- [ ] 템플릿 선택 (정의/빈칸/비교 — 라디오 또는 칩)
- [ ] "카드 만들기" 버튼 → 로딩 → 결과 페이지 이동
- [ ] 로딩 상태 (프로그레스 바 또는 스피너 + 안내 문구)

### 결과/검수 페이지 (`/s/{sessionId}`)
- [ ] 카드 리스트 뷰 (앞면 / 뒷면 / 근거 표시)
- [ ] 카드별 액션 버튼: ✅ 채택 / ❌ 삭제 / ✏️ 수정
- [ ] 수정 시 인라인 에디팅 (앞면/뒷면)
- [ ] 근거 하이라이트 (페이지 번호 + 원문 스니펫)
- [ ] 상단 요약: 총 N장 / 채택 N장 / 삭제 N장
- [ ] "CSV 다운로드" 버튼 (채택된 카드만)
- [ ] 카드 뒤집기 인터랙션 (탭/클릭으로 앞↔뒤)

### 공통 컴포넌트
- [ ] 반응형 레이아웃 (모바일 420px 기준)
- [ ] Navbar (로고 + 다크모드 토글)
- [ ] 에러 상태 UI (업로드 실패, 생성 실패 등)
- [ ] 빈 상태 UI (카드 0장일 때)

---

## Day 3: 마무리 + 배포

### UX 마무리
- [ ] 미리보기 5장 먼저 표시 (가치 체감 포인트)
- [ ] 로딩 중 예상 시간 안내 ("약 15초 소요")
- [ ] 토스트/알림 (다운로드 완료, 카드 삭제 등)
- [ ] 빈칸형 카드의 빈칸 스타일링 (`___` → 하이라이트)
- [ ] 모바일 터치 UX 확인 (스와이프, 버튼 크기)

### 배포
- [ ] 백엔드: EC2 Docker Compose 배포 (기존 인프라 활용)
- [ ] 프론트: Vercel 배포
- [ ] 도메인 설정 (decard.eupori.dev 또는 별도 도메인)
- [ ] HTTPS 확인
- [ ] 기본 에러 모니터링 (Sentry 연동 — 기존 설정 재활용)

### 테스트
- [ ] 텍스트 PDF 3종 테스트 (강의자료, 교재, 필기)
- [ ] 카드 생성 품질 확인 (근거 정확성, 템플릿별)
- [ ] 검수 플로우 전체 테스트 (업로드→생성→검수→다운로드)
- [ ] 모바일 브라우저 테스트 (Chrome, Safari)
- [ ] CSV → Anki 임포트 테스트

### 배포 후
- [ ] 공유 링크 생성 (지아현 + 테스터 배포용)
- [ ] 간단한 피드백 수집 방법 준비 (구글 폼 또는 카톡)

---

## 과감하게 뺀 것 (MVP 이후)

| 기능 | 이유 | 시기 |
|------|------|------|
| 로그인/회원가입 | 검증 단계에서 불필요 | 2주차 |
| 결제 시스템 | 무료로 써보게 한 후 판단 | 5-6주차 |
| .apkg 포맷 | CSV면 Anki 임포트 가능 | 3-4주차 |
| 코스/워크스페이스 | 단일 업로드로 충분 | 3-4주차 |
| 중복 카드 감지 | 후순위 | 3-4주차 |
| OCR (스캔 PDF) | 텍스트 PDF만 지원 | 7주차+ |
| 비동기 큐 | 동기 처리로 충분 | 필요 시 |
| 네이티브 앱 | 웹 먼저 | 7-9주차 |
| 덱 공유/마켓 | 저작권 리스크 | 검토 후 |

---

## 기술 스택

| 구분 | 선택 | 비고 |
|------|------|------|
| 프론트 | Next.js 14 (App Router) + Tailwind | Vercel 배포 |
| 백엔드 | FastAPI + pdfplumber | EC2 배포 |
| AI | Claude Sonnet 4.5 | 근거 추출 정확도 |
| DB | SQLite | MVP 충분, 나중에 PostgreSQL |
| 파일 | 임시 저장 후 삭제 | 저작권 보호 |

---

## 성공 기준 (MVP)

| 지표 | 목표 |
|------|------|
| PDF→카드 생성 성공률 | 90% 이상 |
| 카드 채택률 (accept rate) | 60% 이상 |
| 생성 소요 시간 | 60초 이내 |
| "유용하다" 피드백 | 10명 중 5명 이상 |
| 결제 의향 | 10명 중 3명 이상 |
